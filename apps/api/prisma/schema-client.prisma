// Client Database Schema
// Each customer has their own database with this schema
//
// This database contains customer-specific data:
// - Clients (the customer's clients)
// - Projects and time tracking
// - Tasks
// - Chat conversations and messages
//
// Note: userId fields reference users in the main database

generator client {
  provider = "prisma-client-js"
  output   = "../src/generated/prisma-client"
}

datasource db {
  provider = "postgresql"
  url      = env("CLIENT_DATABASE_URL")
}

model Client {
  id                   String    @id @default(uuid())
  name                 String
  slug                 String    @unique
  companyName          String?   @map("company_name")
  isActive             Boolean   @default(true) @map("is_active")
  hourlyRate           Decimal?  @map("hourly_rate") @db.Decimal(10, 2)
  discountPercentage   Decimal?  @default(0) @map("discount_percentage") @db.Decimal(5, 2)
  // Contact Information
  email                String?
  phone                String?
  website              String?
  contactPerson        String?   @map("contact_person")
  // Billing Address
  billingAddressLine1  String?   @map("billing_address_line1")
  billingAddressLine2  String?   @map("billing_address_line2")
  billingCity          String?   @map("billing_city")
  billingState         String?   @map("billing_state")
  billingPostalCode    String?   @map("billing_postal_code")
  billingCountry       String?   @map("billing_country")
  // Billing Contact
  billingContactName   String?   @map("billing_contact_name")
  billingContactEmail  String?   @map("billing_contact_email")
  billingContactPhone  String?   @map("billing_contact_phone")
  // Invoice Numbering
  invoicePrefix        String?   @map("invoice_prefix") // e.g., "INV-", "ABC-"
  invoiceNextNumber    Int       @default(1) @map("invoice_next_number")
  invoiceNumberPadding Int       @default(5) @map("invoice_number_padding") // e.g., 5 = "00001"
  projects             Project[]
  products             Product[]
  invoices             Invoice[]
  expenses             Expense[]
  createdAt            DateTime  @default(now()) @map("created_at")
  updatedAt            DateTime  @updatedAt @map("updated_at")
  deletedAt            DateTime? @map("deleted_at")

  @@index([slug])
  @@index([isActive])
  @@map("clients")
}

model Product {
  id          String    @id @default(uuid())
  name        String
  description String?   @db.Text
  sku         String? // Stock Keeping Unit
  clientId    String?   @map("client_id") // Optional - if null, it's a tenant-level product
  client      Client?   @relation(fields: [clientId], references: [id])
  imageUrl    String?   @map("image_url") // Product image URL
  rate        Decimal?  @db.Decimal(10, 2) // Product rate/price
  unit        String? // e.g., "unit", "piece", "kg", "lb", "pack", "box"
  isActive    Boolean   @default(true) @map("is_active")
  expenses    Expense[]
  createdAt   DateTime  @default(now()) @map("created_at")
  updatedAt   DateTime  @updatedAt @map("updated_at")
  deletedAt   DateTime? @map("deleted_at")

  @@index([clientId])
  @@index([isActive])
  @@index([sku])
  @@map("products")
}

model Project {
  id                       String          @id @default(uuid())
  name                     String
  description              String?
  clientId                 String?         @map("client_id")
  client                   Client?         @relation(fields: [clientId], references: [id])
  isActive                 Boolean         @default(true) @map("is_active")
  startDate                DateTime?       @map("start_date")
  endDate                  DateTime?       @map("end_date")
  isBillableProject        Boolean         @default(true) @map("is_billable_project")
  defaultBillable          Boolean         @default(true) @map("default_billable")
  // Budget tracking fields
  hourlyRate               Decimal?        @map("hourly_rate") @db.Decimal(10, 2)
  allocatedHours           Decimal?        @map("allocated_hours") @db.Decimal(10, 2)
  additionalHoursAllocated Decimal?        @default(0) @map("additional_hours_allocated") @db.Decimal(10, 2)
  //
  timeEntries              TimeEntry[]
  tasks                    Task[]
  members                  ProjectMember[]
  expenses                 Expense[]
  createdAt                DateTime        @default(now()) @map("created_at")
  updatedAt                DateTime        @updatedAt @map("updated_at")
  deletedAt                DateTime?       @map("deleted_at")

  @@index([clientId])
  @@index([isActive])
  @@map("projects")
}

model ProjectMember {
  id         String   @id @default(uuid())
  projectId  String   @map("project_id")
  project    Project  @relation(fields: [projectId], references: [id], onDelete: Cascade)
  userId     String   @map("user_id")
  isBillable Boolean? @map("is_billable")
  createdAt  DateTime @default(now()) @map("created_at")
  updatedAt  DateTime @updatedAt @map("updated_at")

  @@unique([projectId, userId])
  @@index([projectId])
  @@index([userId])
  @@map("project_members")
}

model TimeEntry {
  id            String    @id @default(uuid())
  userId        String    @map("user_id")
  projectId     String    @map("project_id")
  project       Project   @relation(fields: [projectId], references: [id])
  description   String?
  startTime     DateTime  @map("start_time")
  endTime       DateTime? @map("end_time")
  duration      Int?
  regularHours  Decimal?  @map("regular_hours") @db.Decimal(10, 2)
  overtimeHours Decimal?  @map("overtime_hours") @db.Decimal(10, 2)
  weekStartDate DateTime? @map("week_start_date")
  isBillable    Boolean   @default(true) @map("is_billable")
  createdAt     DateTime  @default(now()) @map("created_at")
  updatedAt     DateTime  @updatedAt @map("updated_at")
  deletedAt     DateTime? @map("deleted_at")

  @@index([userId])
  @@index([projectId])
  @@index([startTime])
  @@index([weekStartDate])
  @@map("time_entries")
}

model Task {
  id               String       @id @default(uuid())
  projectId        String       @map("project_id")
  project          Project      @relation(fields: [projectId], references: [id])
  title            String
  description      String?
  status           TaskStatus   @default(TODO)
  priority         TaskPriority @default(MEDIUM)
  assignedToUserId String?      @map("assigned_to_user_id")
  dueDate          DateTime?    @map("due_date")
  completedAt      DateTime?    @map("completed_at")
  createdAt        DateTime     @default(now()) @map("created_at")
  updatedAt        DateTime     @updatedAt @map("updated_at")

  @@index([projectId])
  @@index([status])
  @@index([assignedToUserId])
  @@map("tasks")
}

enum TaskStatus {
  TODO
  IN_PROGRESS
  REVIEW
  DONE
  CANCELLED
}

enum TaskPriority {
  LOW
  MEDIUM
  HIGH
  URGENT
}

model Conversation {
  id        String    @id @default(uuid())
  userId    String    @map("user_id")
  title     String?
  isActive  Boolean   @default(true) @map("is_active")
  messages  Message[]
  createdAt DateTime  @default(now()) @map("created_at")
  updatedAt DateTime  @updatedAt @map("updated_at")

  @@index([userId])
  @@index([isActive])
  @@map("conversations")
}

model Message {
  id             String           @id @default(uuid())
  conversationId String           @map("conversation_id")
  conversation   Conversation     @relation(fields: [conversationId], references: [id], onDelete: Cascade)
  role           MessageRole
  content        String           @db.Text
  metadata       Json?
  ratings        ResponseRating[]
  createdAt      DateTime         @default(now()) @map("created_at")

  @@index([conversationId])
  @@map("messages")
}

enum MessageRole {
  USER
  ASSISTANT
  SYSTEM
}

// Phase 5: Response Rating System
// Tracks user feedback on preview data and final reports
model ResponseRating {
  id         String      @id @default(uuid())
  messageId  String      @map("message_id")
  message    Message     @relation(fields: [messageId], references: [id], onDelete: Cascade)
  userId     String      @map("user_id") // References user in main DB
  ratingType RatingType  @map("rating_type") // 'preview' or 'report'
  rating     RatingValue // BAD, OK, or GOOD
  feedback   String?     @db.Text // Optional user feedback text
  metadata   Json? // Additional context (query, format, etc.)
  createdAt  DateTime    @default(now()) @map("created_at")

  @@index([messageId])
  @@index([userId])
  @@index([ratingType])
  @@index([rating])
  @@map("response_ratings")
}

enum RatingType {
  PREVIEW // Rating for Phase 3 preview data
  REPORT // Rating for Phase 4 formatted report
}

enum RatingValue {
  BAD
  OK
  GOOD
}

model PayPalTenantConfig {
  id                   String   @id @default(uuid())
  paypalIntegrationId  String   @map("paypal_integration_id") // References PayPalIntegration in main DB
  isEnabled            Boolean  @default(false) @map("is_enabled")
  // PayPal invoice settings
  invoiceEmailSubject  String?  @map("invoice_email_subject") // Custom email subject line
  invoiceTermsAndConds String?  @map("invoice_terms_and_conds") @db.Text // Custom terms and conditions
  invoiceNote          String?  @map("invoice_note") @db.Text // Note to appear on invoice
  invoiceMerchantLogo  String?  @map("invoice_merchant_logo") // Logo URL
  // Payment settings
  allowPartialPayment  Boolean  @default(true) @map("allow_partial_payment")
  minimumAmountDue     Decimal? @map("minimum_amount_due") @db.Decimal(10, 2)
  dueInDays            Int      @default(30) @map("due_in_days") // Net 30, Net 60, etc.
  createdAt            DateTime @default(now()) @map("created_at")
  updatedAt            DateTime @updatedAt @map("updated_at")

  @@map("paypal_tenant_configs")
}

model Invoice {
  id                 String           @id @default(uuid())
  invoiceNumber      String           @unique @map("invoice_number") // e.g., "INV-00001"
  clientId           String?          @map("client_id")
  client             Client?          @relation(fields: [clientId], references: [id])
  status             InvoiceStatus    @default(DRAFT)
  paypalInvoiceId    String?          @unique @map("paypal_invoice_id") // PayPal's invoice ID
  paypalInvoiceUrl   String?          @map("paypal_invoice_url") // PayPal invoice URL for viewing/payment
  // Dates
  issueDate          DateTime         @map("issue_date")
  dueDate            DateTime         @map("due_date")
  paidDate           DateTime?        @map("paid_date")
  // Amounts
  subtotal           Decimal          @db.Decimal(10, 2)
  taxRate            Decimal          @default(0) @map("tax_rate") @db.Decimal(5, 2)
  taxAmount          Decimal          @default(0) @map("tax_amount") @db.Decimal(10, 2)
  discountAmount     Decimal          @default(0) @map("discount_amount") @db.Decimal(10, 2)
  totalAmount        Decimal          @map("total_amount") @db.Decimal(10, 2)
  amountPaid         Decimal          @default(0) @map("amount_paid") @db.Decimal(10, 2)
  amountDue          Decimal          @map("amount_due") @db.Decimal(10, 2)
  // Details
  note               String?          @db.Text
  termsAndConditions String?          @map("terms_and_conditions") @db.Text
  // Metadata
  createdBy          String           @map("created_by") // User ID
  sentBy             String?          @map("sent_by") // User ID who sent the invoice
  sentAt             DateTime?        @map("sent_at")
  items              InvoiceItem[]
  payments           InvoicePayment[]
  createdAt          DateTime         @default(now()) @map("created_at")
  updatedAt          DateTime         @updatedAt @map("updated_at")

  @@index([clientId])
  @@index([status])
  @@index([issueDate])
  @@index([dueDate])
  @@index([paypalInvoiceId])
  @@map("invoices")
}

model InvoiceItem {
  id           String   @id @default(uuid())
  invoiceId    String   @map("invoice_id")
  invoice      Invoice  @relation(fields: [invoiceId], references: [id], onDelete: Cascade)
  projectId    String?  @map("project_id") // Optional reference to project
  description  String   @db.Text
  quantity     Decimal  @db.Decimal(10, 2)
  unitPrice    Decimal  @map("unit_price") @db.Decimal(10, 2)
  amount       Decimal  @db.Decimal(10, 2) // quantity * unitPrice
  // Time entry references (if invoice item is from time entries)
  timeEntryIds String[] @default([]) @map("time_entry_ids") // Array of time entry IDs
  createdAt    DateTime @default(now()) @map("created_at")

  @@index([invoiceId])
  @@index([projectId])
  @@map("invoice_items")
}

model InvoicePayment {
  id              String   @id @default(uuid())
  invoiceId       String   @map("invoice_id")
  invoice         Invoice  @relation(fields: [invoiceId], references: [id], onDelete: Cascade)
  paypalPaymentId String?  @map("paypal_payment_id") // PayPal transaction ID
  amount          Decimal  @db.Decimal(10, 2)
  paymentDate     DateTime @map("payment_date")
  paymentMethod   String?  @map("payment_method") // e.g., "PayPal", "Credit Card", "Check"
  note            String?  @db.Text
  createdAt       DateTime @default(now()) @map("created_at")

  @@index([invoiceId])
  @@index([paymentDate])
  @@map("invoice_payments")
}

enum InvoiceStatus {
  DRAFT // Not yet sent
  SENT // Sent to client via PayPal
  VIEWED // Client viewed the invoice
  PAID // Fully paid
  PARTIAL_PAID // Partially paid
  CANCELLED // Cancelled
  REFUNDED // Refunded
  OVERDUE // Past due date
}

// LLM Configuration - Tenant-specific LLM settings (tenantadmin)
model LLMConfig {
  id              String      @id @default(uuid())
  provider        LLMProvider
  apiKeyEncrypted String      @map("api_key_encrypted") // Encrypted API key
  defaultModel    String      @map("default_model")
  temperature     Decimal     @default(0.7) @db.Decimal(3, 2) // 0.00-1.00
  maxTokens       Int         @default(2000) @map("max_tokens")
  baseUrl         String?     @map("base_url") // Custom API endpoint (optional)
  organization    String?     @map("organization") // Organization ID (OpenAI only)
  timeout         Int         @default(30000) // Request timeout in milliseconds
  isActive        Boolean     @default(true) @map("is_active")
  createdBy       String      @map("created_by") // User ID who created this config
  createdAt       DateTime    @default(now()) @map("created_at")
  updatedAt       DateTime    @updatedAt @map("updated_at")

  @@index([isActive])
  @@index([provider])
  @@map("llm_configs")
}

enum LLMProvider {
  OPENAI        @map("openai")
  ANTHROPIC     @map("anthropic")
  GOOGLE_GEMINI @map("google-gemini")
  PERPLEXITY    @map("perplexity")
  ABACUS_AI     @map("abacus-ai")

  @@map("llm_provider")
}

// Expense Tracking System
model ExpenseCategory {
  id          String    @id @default(uuid())
  name        String
  description String?
  icon        String? // Icon name for UI display
  color       String? // Color code for UI display
  isSystem    Boolean   @default(false) @map("is_system") // System categories can't be deleted
  isActive    Boolean   @default(true) @map("is_active")
  expenses    Expense[]
  createdAt   DateTime  @default(now()) @map("created_at")
  updatedAt   DateTime  @updatedAt @map("updated_at")

  @@index([isActive])
  @@map("expense_categories")
}

model Expense {
  id              String              @id @default(uuid())
  // Assignment - expense can be at tenant, client, or product level
  clientId        String?             @map("client_id")
  client          Client?             @relation(fields: [clientId], references: [id])
  productId       String?             @map("product_id")
  product         Product?            @relation(fields: [productId], references: [id])
  projectId       String?             @map("project_id")
  project         Project?            @relation(fields: [projectId], references: [id])
  // Category
  categoryId      String              @map("category_id")
  category        ExpenseCategory     @relation(fields: [categoryId], references: [id])
  // Expense details
  description     String
  vendor          String? // Merchant/vendor name
  amount          Decimal             @db.Decimal(10, 2)
  currency        String              @default("USD")
  expenseDate     DateTime            @map("expense_date")
  // Payment details
  paymentMethod   String?             @map("payment_method") // Cash, Credit Card, Debit Card, Check, etc.
  reference       String? // Receipt number, transaction ID, etc.
  // Reimbursement tracking
  isReimbursable  Boolean             @default(false) @map("is_reimbursable")
  isReimbursed    Boolean             @default(false) @map("is_reimbursed")
  reimbursedAt    DateTime?           @map("reimbursed_at")
  reimbursedBy    String?             @map("reimbursed_by") // User ID
  // Tax
  taxAmount       Decimal?            @map("tax_amount") @db.Decimal(10, 2)
  taxRate         Decimal?            @map("tax_rate") @db.Decimal(5, 2)
  // Status
  status          ExpenseStatus       @default(PENDING)
  approvedBy      String?             @map("approved_by") // User ID
  approvedAt      DateTime?           @map("approved_at")
  rejectedBy      String?             @map("rejected_by") // User ID
  rejectedAt      DateTime?           @map("rejected_at")
  rejectionReason String?             @map("rejection_reason")
  // Notes
  notes           String?             @db.Text
  // Metadata from OCR/AI parsing
  ocrData         Json?               @map("ocr_data") // Raw OCR data from receipt
  aiConfidence    Decimal?            @map("ai_confidence") @db.Decimal(3, 2) // AI parsing confidence 0-1
  // Audit
  createdBy       String              @map("created_by") // User ID
  updatedBy       String?             @map("updated_by") // User ID
  attachments     ExpenseAttachment[]
  createdAt       DateTime            @default(now()) @map("created_at")
  updatedAt       DateTime            @updatedAt @map("updated_at")
  deletedAt       DateTime?           @map("deleted_at")

  @@index([clientId])
  @@index([productId])
  @@index([projectId])
  @@index([categoryId])
  @@index([expenseDate])
  @@index([status])
  @@index([createdBy])
  @@map("expenses")
}

model ExpenseAttachment {
  id            String   @id @default(uuid())
  expenseId     String   @map("expense_id")
  expense       Expense  @relation(fields: [expenseId], references: [id], onDelete: Cascade)
  fileName      String   @map("file_name")
  fileType      String   @map("file_type") // MIME type
  fileSize      Int      @map("file_size") // Size in bytes
  filePath      String   @map("file_path") // Storage path
  thumbnailPath String?  @map("thumbnail_path") // Thumbnail for images
  isReceipt     Boolean  @default(false) @map("is_receipt") // Primary receipt flag
  uploadedBy    String   @map("uploaded_by") // User ID
  createdAt     DateTime @default(now()) @map("created_at")

  @@index([expenseId])
  @@map("expense_attachments")
}

enum ExpenseStatus {
  PENDING // Awaiting approval
  APPROVED // Approved
  REJECTED // Rejected
  PAID // Paid/reimbursed
  CANCELLED // Cancelled
}

// Add relation to Client for expenses
// Add relation to Product for expenses

// =============================================================================
// Accounting System - Additional Entities
// =============================================================================

// Payment Terms - Net 30, Net 60, etc.
model PaymentTerm {
  id              String    @id @default(uuid())
  name            String // e.g., "Net 30", "Due on Receipt", "2/10 Net 30"
  description     String?
  daysUntilDue    Int       @map("days_until_due") // Number of days until payment is due
  // Early payment discount
  discountPercent Decimal?  @map("discount_percent") @db.Decimal(5, 2) // e.g., 2% for "2/10 Net 30"
  discountDays    Int?      @map("discount_days") // Days to qualify for discount (e.g., 10 for "2/10 Net 30")
  // Settings
  isDefault       Boolean   @default(false) @map("is_default")
  isActive        Boolean   @default(true) @map("is_active")
  // Metadata
  createdBy       String    @map("created_by") // User ID
  createdAt       DateTime  @default(now()) @map("created_at")
  updatedAt       DateTime  @updatedAt @map("updated_at")
  deletedAt       DateTime? @map("deleted_at")

  @@index([isActive])
  @@index([isDefault])
  @@map("payment_terms")
}

// Discounts - Percentage or fixed amount discounts
model Discount {
  id              String       @id @default(uuid())
  name            String // e.g., "Loyal Customer Discount", "Volume Discount"
  description     String?
  code            String?      @unique // Optional discount code
  discountType    DiscountType @map("discount_type") // PERCENTAGE or FIXED_AMOUNT
  discountValue   Decimal      @map("discount_value") @db.Decimal(10, 2) // Amount or percentage
  // Applicability
  appliesToAll    Boolean      @default(true) @map("applies_to_all") // Applies to all items
  clientId        String?      @map("client_id") // Optional - specific client only
  // Constraints
  minimumAmount   Decimal?     @map("minimum_amount") @db.Decimal(10, 2) // Minimum invoice amount
  maximumDiscount Decimal?     @map("maximum_discount") @db.Decimal(10, 2) // Max discount amount (for percentage)
  // Validity
  validFrom       DateTime?    @map("valid_from")
  validUntil      DateTime?    @map("valid_until")
  // Usage limits
  usageLimit      Int?         @map("usage_limit") // Max number of times it can be used
  usageCount      Int          @default(0) @map("usage_count") // Current usage count
  // Settings
  isActive        Boolean      @default(true) @map("is_active")
  // Metadata
  createdBy       String       @map("created_by") // User ID
  createdAt       DateTime     @default(now()) @map("created_at")
  updatedAt       DateTime     @updatedAt @map("updated_at")
  deletedAt       DateTime?    @map("deleted_at")

  @@index([code])
  @@index([isActive])
  @@index([clientId])
  @@index([validFrom, validUntil])
  @@map("discounts")
}

enum DiscountType {
  PERCENTAGE
  FIXED_AMOUNT
}

// Coupons - Promotional codes for customers
model Coupon {
  id                  String             @id @default(uuid())
  code                String             @unique // e.g., "SAVE10", "WELCOME"
  name                String // Display name
  description         String?
  discountType        DiscountType       @map("discount_type")
  discountValue       Decimal            @map("discount_value") @db.Decimal(10, 2)
  // Constraints
  minimumAmount       Decimal?           @map("minimum_amount") @db.Decimal(10, 2)
  maximumDiscount     Decimal?           @map("maximum_discount") @db.Decimal(10, 2)
  // Validity
  validFrom           DateTime           @map("valid_from")
  validUntil          DateTime           @map("valid_until")
  // Usage limits
  usageLimit          Int?               @map("usage_limit") // Total uses allowed
  usageLimitPerClient Int?               @map("usage_limit_per_client") // Uses per client
  usageCount          Int                @default(0) @map("usage_count")
  // Applicability
  clientIds           String[]           @default([]) @map("client_ids") // Empty = all clients
  // Settings
  isActive            Boolean            @default(true) @map("is_active")
  isFirstPurchase     Boolean            @default(false) @map("is_first_purchase") // Only for first-time customers
  // Metadata
  createdBy           String             @map("created_by") // User ID
  createdAt           DateTime           @default(now()) @map("created_at")
  updatedAt           DateTime           @updatedAt @map("updated_at")
  deletedAt           DateTime?          @map("deleted_at")
  // Redemptions tracking
  redemptions         CouponRedemption[]

  @@index([code])
  @@index([isActive])
  @@index([validFrom, validUntil])
  @@map("coupons")
}

// Coupon Redemption - Track when coupons are used
model CouponRedemption {
  id             String   @id @default(uuid())
  couponId       String   @map("coupon_id")
  coupon         Coupon   @relation(fields: [couponId], references: [id], onDelete: Cascade)
  invoiceId      String   @map("invoice_id") // Reference to invoice
  clientId       String?  @map("client_id") // Client who used the coupon
  discountAmount Decimal  @map("discount_amount") @db.Decimal(10, 2) // Actual discount applied
  redeemedBy     String   @map("redeemed_by") // User ID
  redeemedAt     DateTime @default(now()) @map("redeemed_at")

  @@index([couponId])
  @@index([invoiceId])
  @@index([clientId])
  @@map("coupon_redemptions")
}

// Payment - Track all payments (extends InvoicePayment for standalone payments)
model Payment {
  id                String        @id @default(uuid())
  invoiceId         String?       @map("invoice_id") // Optional - can be standalone payment
  clientId          String?       @map("client_id") // Client making payment
  // Payment details
  amount            Decimal       @db.Decimal(10, 2)
  currency          String        @default("USD")
  paymentMethod     PaymentMethod @map("payment_method")
  paymentDate       DateTime      @map("payment_date")
  // External references
  transactionId     String?       @map("transaction_id") // External payment system ID
  referenceNumber   String?       @map("reference_number") // Check number, etc.
  // Status
  status            PaymentStatus @default(COMPLETED)
  // Details
  note              String?       @db.Text
  // Refund tracking
  isRefund          Boolean       @default(false) @map("is_refund")
  refundedPaymentId String?       @map("refunded_payment_id") // Original payment ID if this is a refund
  // Metadata
  receivedBy        String        @map("received_by") // User ID who recorded payment
  createdAt         DateTime      @default(now()) @map("created_at")
  updatedAt         DateTime      @updatedAt @map("updated_at")

  @@index([invoiceId])
  @@index([clientId])
  @@index([paymentDate])
  @@index([status])
  @@index([paymentMethod])
  @@map("payments")
}

enum PaymentMethod {
  CASH
  CHECK
  CREDIT_CARD
  DEBIT_CARD
  BANK_TRANSFER
  PAYPAL
  STRIPE
  WIRE
  ACH
  OTHER
}

enum PaymentStatus {
  PENDING
  COMPLETED
  FAILED
  REFUNDED
  CANCELLED
}
