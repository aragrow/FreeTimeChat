# FreeTimeChat API Environment Configuration
# Copy this file to .env and fill in your actual values
# DO NOT commit .env file to version control

# =============================================================================
# Application
# =============================================================================

NODE_ENV=development
PORT=3001
API_URL=http://localhost:3001

# =============================================================================
# Database - Main (Authentication & Client Registry)
# =============================================================================

# Main database connection string
# Format: postgresql://USER:PASSWORD@HOST:PORT/DATABASE?connection_limit=10&pool_timeout=20&statement_cache_size=100
# Performance parameters:
#   - connection_limit: Max connections per Prisma Client (10 dev, 20-50 prod)
#   - pool_timeout: Seconds to wait for connection from pool
#   - statement_cache_size: Number of prepared statements to cache
DATABASE_URL="postgresql://freetimechat:freetimechat_dev_password@localhost:5432/freetimechat_main?connection_limit=10&pool_timeout=20&statement_cache_size=100"

# =============================================================================
# Database - Client (Development)
# =============================================================================

# Development client database connection string
# In production, this will be dynamically generated per client
CLIENT_DATABASE_URL="postgresql://freetimechat:freetimechat_dev_password@localhost:5432/freetimechat_client_dev?connection_limit=10&pool_timeout=20&statement_cache_size=100"

# =============================================================================
# Redis Cache
# =============================================================================

REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=freetimechat_redis_password
REDIS_DB=0
REDIS_TTL=3600

# =============================================================================
# JWT Authentication
# =============================================================================

# RS256 Keys (Generate with: npm run generate:keys)
# Path to RSA private key for signing JWTs
JWT_PRIVATE_KEY_PATH=./keys/private.pem

# Path to RSA public key for verifying JWTs
JWT_PUBLIC_KEY_PATH=./keys/public.pem

# JWT Expiration (in seconds or zeit/ms format)
JWT_ACCESS_TOKEN_EXPIRY=15m
JWT_REFRESH_TOKEN_EXPIRY=7d

# JWT Issuer and Audience
JWT_ISSUER=freetimechat-api
JWT_AUDIENCE=freetimechat-web

# =============================================================================
# Security
# =============================================================================

# Bcrypt rounds for password hashing (10-12 recommended)
BCRYPT_ROUNDS=12

# Session secret for Express sessions
SESSION_SECRET=your-session-secret-here-change-in-production-min-32-chars

# =============================================================================
# OAuth - Google
# =============================================================================

GOOGLE_CLIENT_ID=your-google-client-id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your-google-client-secret
GOOGLE_CALLBACK_URL=http://localhost:3001/api/v1/auth/google/callback

# =============================================================================
# Two-Factor Authentication
# =============================================================================

TWO_FACTOR_APP_NAME=FreeTimeChat
TWO_FACTOR_ISSUER=FreeTimeChat

# =============================================================================
# CORS Configuration
# =============================================================================

# Comma-separated list of allowed origins
CORS_ORIGIN=http://localhost:3000,http://localhost:3001
CORS_CREDENTIALS=true

# =============================================================================
# Rate Limiting
# =============================================================================

# Time window in milliseconds (15 minutes = 900000ms)
RATE_LIMIT_WINDOW_MS=900000

# Max requests per window
RATE_LIMIT_MAX_REQUESTS=100

# =============================================================================
# Logging
# =============================================================================

# Log level: error, warn, info, http, verbose, debug, silly
LOG_LEVEL=debug

# Log format: dev, combined, common, short, tiny
LOG_FORMAT=dev

# =============================================================================
# Email (Future - for notifications)
# =============================================================================

# SMTP Configuration
# SMTP_HOST=smtp.mailtrap.io
# SMTP_PORT=2525
# SMTP_SECURE=false
# SMTP_USER=your-smtp-user
# SMTP_PASS=your-smtp-password
# SMTP_FROM=noreply@freetimechat.com
# SMTP_FROM_NAME=FreeTimeChat

# =============================================================================
# AI/LLM Integration (Future)
# =============================================================================

# OpenAI Configuration
# OPENAI_API_KEY=sk-...
# OPENAI_ORG_ID=org-...
# OPENAI_MODEL=gpt-4
# OPENAI_TEMPERATURE=0.7
# OPENAI_MAX_TOKENS=2000

# =============================================================================
# Vector Database (Future - for chat embeddings)
# =============================================================================

# Pinecone Configuration
# PINECONE_API_KEY=your-pinecone-api-key
# PINECONE_ENVIRONMENT=your-pinecone-environment
# PINECONE_INDEX=freetimechat-embeddings

# =============================================================================
# Monitoring & Analytics (Future)
# =============================================================================

# Sentry Error Tracking
# SENTRY_DSN=https://...@sentry.io/...
# SENTRY_ENVIRONMENT=development
# SENTRY_TRACES_SAMPLE_RATE=1.0

# =============================================================================
# Feature Flags
# =============================================================================

ENABLE_REGISTRATION=true
ENABLE_GOOGLE_AUTH=true
ENABLE_TWO_FACTOR=true
ENABLE_IMPERSONATION=true
